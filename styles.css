/* ============ Design tokens ============ */
:root {
  /* Core palette */
  --bg: #0a0d11;
  --surface: #0e1319;
  --elev: #121824;
  --text: #e7ecf3;
  --muted: #9fb0c2;
  --border: #2a3444;

  /* Accents */
  --primary: #58c4ff;
  --accent: #00e0b8;
  --danger: #ff6464;

  /* Glows and shadows */
  --glow-primary: 0 0 0 1px rgba(88,196,255,0.25), 0 8px 32px rgba(88,196,255,0.18);
  --glow-accent: 0 0 0 1px rgba(0,224,184,0.26), 0 10px 36px rgba(0,224,184,0.20);

  /* Radii and spacing */
  --radius-lg: 16px;
  --radius-md: 12px;
  --radius-sm: 10px;
  --pad-lg: 18px;
  --pad-md: 14px;
  --pad-sm: 10px;

  /* Typography */
  --font-ui: "Inter", system-ui, -apple-system, "Segoe UI", "Roboto", "Noto Sans", "Ubuntu", "Cantarell", "Helvetica Neue", Arial;
  --font-fa: "Vazirmatn", "Inter", system-ui, -apple-system, "Segoe UI";
  --font-mono: "Roboto Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Motion */
  --ease: cubic-bezier(0.2, 0.8, 0.2, 1);
  --transition: 180ms var(--ease);
}

/* ============ Global reset and base ============ */
* { box-sizing: border-box; }
html, body {
  margin: 0;
  padding: 0;
  background:
    radial-gradient(1200px 700px at 15% -10%, rgba(88,196,255,0.12), transparent 50%),
    radial-gradient(900px 600px at 110% 30%, rgba(0,224,184,0.10), transparent 58%),
    var(--bg);
  color: var(--text);
  font-family: var(--font-ui);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* Switch to Vazirmatn for Persian via dir="rtl" on <html> or <body> */
html[dir="rtl"], body[dir="rtl"] {
  font-family: var(--font-fa);
}

/* Numerics: monospaced and tabular */
.mono {
  font-family: var(--font-mono);
  font-variant-numeric: lining-nums tabular-nums;
}

/* Accessible focus */
:focus {
  outline: none;
}
:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* ============ App layout ============ */
.app-wrap {
  min-height: 100vh;
  display: grid;
  grid-template-rows: auto 1fr auto;
}

/* ============ Header ============ */
.app-header {
  padding: 36px 20px 18px;
  text-align: center;
}
.branding {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  justify-content: center;
}
.brand-dot {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  box-shadow: var(--glow-accent);
}
.app-header h1 {
  margin: 0;
  font-weight: 800;
  letter-spacing: 0.2px;
}
.subtitle {
  margin: 8px 0 0;
  color: var(--muted);
  font-weight: 500;
}

/* ============ Language switch ============ */
.lang-switch {
  display: inline-grid;
  grid-auto-flow: column;
  gap: 10px;
  margin-top: 14px;
  padding: 6px;
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  background: linear-gradient(180deg, rgba(17,23,31,0.86), rgba(17,23,31,0.92));
  backdrop-filter: blur(6px);
  box-shadow: 0 0 0 1px rgba(88,196,255,0.22), 0 8px 32px rgba(88,196,255,0.14);
}
.lang-btn {
  position: relative;
  background: transparent;
  border: none;
  color: var(--muted);
  font-weight: 700;
  font-size: 0.95rem;
  padding: 8px 16px;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition);
  will-change: transform, box-shadow, color, background;
}
.lang-btn:hover {
  color: var(--primary);
}
.lang-btn.active {
  background: linear-gradient(135deg, var(--accent), var(--primary));
  color: #061015;
  box-shadow: var(--glow-accent);
}

/* ============ Main container ============ */
.app-main {
  max-width: 1080px;
  margin: 0 auto;
  padding: 24px 16px 40px;
}

/* ============ Tabs panel ============ */
.panel {
  background: linear-gradient(180deg, rgba(17,23,31,0.86), rgba(17,23,31,0.92));
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--pad-md);
  backdrop-filter: blur(6px);
}
.tabs {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(140px, 1fr);
  gap: 10px;
}
.tab {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text);
  padding: 10px 16px;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition);
  position: relative;
}
.tab:hover {
  border-color: var(--primary);
  color: var(--primary);
}
.tab.active {
  background: var(--elev);
  border-color: var(--primary);
  box-shadow: var(--glow-primary);
}

/* ============ Cards (sections) ============ */
.card {
  margin-top: 16px;
  background: linear-gradient(180deg, rgba(16,22,31,0.98), rgba(16,22,31,1));
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--pad-md);
  display: none;
  backdrop-filter: blur(6px);
  animation: cardFade 260ms var(--ease);
}
.card.visible { display: block; }
@keyframes cardFade {
  from { opacity: 0; transform: translateY(4px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ============ Card head ============ */
.card-head {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 16px;
}
.card-head h2 {
  margin: 0;
  font-weight: 800;
}
.formula {
  color: var(--muted);
  padding: 8px 12px;
  border: 1px dashed var(--border);
  border-radius: var(--radius-md);
  background: #0f1620;
}

/* ============ Forms ============ */
.form {
  margin-top: 14px;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 14px;
}
.field { display: flex; flex-direction: column; gap: 8px; }
label { color: var(--muted); font-size: 0.95rem; font-weight: 600; }

.input-group {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
}

/* Inputs and selects */
input[type="number"], select {
  background: #0d131b;
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 12px 14px;
  transition: all var(--transition);
}
input[type="number"]::placeholder {
  color: #6e7d8d;
}
input[type="number"]:focus, select:focus {
  border-color: var(--accent);
  box-shadow: var(--glow-accent);
}

/* Primary action button */
.primary {
  grid-column: 1 / -1;
  background: linear-gradient(135deg, var(--accent), var(--primary));
  color: #061015;
  border: none;
  border-radius: var(--radius-md);
  padding: 14px 18px;
  font-weight: 800;
  cursor: pointer;
  transition: transform 60ms ease, box-shadow 200ms ease;
}
.primary:hover { box-shadow: var(--glow-accent); }
.primary:active { transform: translateY(1px); }

/* Result area with LaTeX */
.result {
  margin-top: 14px;
  padding: 14px;
  background: #0f1620;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  min-height: 56px;
}

/* Error highlight (set dynamically via JS) */
.error {
  color: var(--danger);
}

/* ============ Footer ============ */
.app-footer {
  padding: 26px 16px;
  text-align: center;
  color: var(--muted);
}

/* ============ RTL support tweaks ============ */
html[dir="rtl"] .app-header,
html[dir="rtl"] .app-footer {
  text-align: center; /* keep centered branding in RTL as well */
}
html[dir="rtl"] .input-group {
  grid-template-columns: auto 1fr; /* unit select then input for RTL feel */
}
html[dir="rtl"] label,
html[dir="rtl"] .subtitle,
html[dir="rtl"] .formula {
  letter-spacing: 0;
}

/* ============ Responsive ============ */
@media (max-width: 980px) {
  .form { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 640px) {
  .form { grid-template-columns: 1fr; }
  .tabs { grid-auto-columns: 1fr; }
}

/* ============ Optional light theme (auto, if you decide to add) ============ */
/*
@media (prefers-color-scheme: light) {
  :root {
    ...
  }
  .panel, .card, .result, .lang-switch {
    ...
  }
}
*/


/* ============ Micro-interactions ============ */
.tab::after {
  content: "";
  position: absolute;
  inset-inline: 20%;
  bottom: -2px;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--primary), transparent);
  opacity: 0;
  transition: opacity var(--transition), transform var(--transition);
  transform: translateY(2px);
}
.tab:hover::after {
  opacity: 0.8;
  transform: translateY(0);
}
